"use strict";function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(a,e,n){return e&&t(a.prototype,e),n&&t(a,n),a}}(),Hata=function(){function t(a,e,n,r,i,l){_classCallCheck(this,t),this.res=a,this.dom=e,this.data=n,this.el=$(this.res),void 0==r&&(r=function(){return!1}),this.events=r,this.dataurl=i,this.interval=l,this.dataloaded=!1,this.domloaded=!1,this.html="",this.init()}return _createClass(t,[{key:"init",value:function(){var t=this;t.loadTmpl(),t.loadData(),void 0!=t.interval&&setInterval(function(){t.loadData(),t.render()},t.interval)}},{key:"render",value:function(){var t=this;if(t.dataloaded&&t.domloaded){if(Array.isArray(t.data)){t.el.html("");for(var a in t.data){var a=t.data[a];t.el.append(t.setData(a,t.html))}}else t.el.html(t.setData(t.data,t.html));t.events()}else setTimeout(function(){t.render()},100);return t}},{key:"rerender",value:function(){this.dataloaded=!1,this.domloaded=!1,this.loadTmpl(),this.loadData(),this.render()}},{key:"setData",value:function(t,a){for(var e in t)a=a.replace(new RegExp("{{"+e+"}}","g"),t[e]);return a}},{key:"loadTmpl",value:function(){var t=this;t.getData("/"+t.dom+".html",function(a){t.html=a.responseText,t.domloaded=!0},function(){t.domloaded=!0,t.html=t.dom})}},{key:"loadData",value:function(){var t=this;void 0!=this.dataurl?t.getData(this.dataurl,function(a){t.data=JSON.parse(a.responseText),t.dataloaded=!0}):t.dataloaded=!0}},{key:"getData",value:function(t,a,e){var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState==XMLHttpRequest.DONE&&(200==n.status?a(n):void 0!=e&&e())},n.open("GET",t,!0),n.send()}}]),t}();